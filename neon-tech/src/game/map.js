import { GAME_CONFIG } from './constants.js';

const { tileSize, width, height } = GAME_CONFIG.map;

const grid = [
  '########################################',
  '#.............#............#...........#',
  '#.............#............#...........#',
  '#.....####....#....####....#....####...#',
  '#.............#............#...........#',
  '#..#######....####....#######....###...#',
  '#.............#............#...........#',
  '#.............#..#######...#...........#',
  '#.....###.....#............#.....###...#',
  '#.............#....####....#...........#',
  '###..#####..####............####..#####.',
  '#.............#............#...........#',
  '#.............#............#...........#',
  '#.....####....#....####....#....####...#',
  '#.............#............#...........#',
  '#..#######....####....#######....###...#',
  '#.............#............#...........#',
  '#.............#..#######...#...........#',
  '#.....###.....#............#.....###...#',
  '#.............#....####....#...........#',
  '#.............#............#...........#',
  '########################################',
];

export const Map = {
  tileSize,
  width,
  height,
  grid,
  pixelWidth: width * tileSize,
  pixelHeight: height * tileSize,
  walls: [],
  lootSpawns: [
    { x: 240, y: 220 },
    { x: 560, y: 420 },
    { x: 920, y: 260 },
    { x: 1020, y: 520 },
    { x: 340, y: 520 },
  ],
  botSpawns: [
    { x: 180, y: 180 },
    { x: 940, y: 180 },
    { x: 720, y: 520 },
  ],
  playerSpawn: { x: 160, y: 520 },
  extractionZone: { x: 1080, y: 560, w: 120, h: 120 },
};

Map.walls = grid.flatMap((row, rowIndex) => {
  const walls = [];
  for (let col = 0; col < row.length; col += 1) {
    if (row[col] === '#') {
      walls.push({
        x: col * tileSize,
        y: rowIndex * tileSize,
        w: tileSize,
        h: tileSize,
      });
    }
  }
  return walls;
});
